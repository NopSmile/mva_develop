<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.itcc.mva.mapper.AsrJsonParseMapper">

    <select id="queryPendingTopMapper" resultType="com.itcc.mva.entity.IntelligentAsrEntity" parameterType="java.lang.Integer">
        SELECT
            PID
            , LOG_ID
            , LEAV_WORD_TIME
            , ANI
            , LEAVEWORD_PATH
            , VOICE_FILE_NAME
            , OUTPUT_FILEPATH
            , OUTPUT_FILENAME
            , ASR_STATUS
            , ASR_TIMESTAMP
            , ASR_FAILTIMES
            , DATAGENERATE_TIME
            , JSONPARSE_STATUS
            , JSONPARSE_RESULT
            , CALLID
            ,ISSUBMIT
            ,FULL_PATH
        FROM ICC_UNION.T_QC_INTELLIGENT_ASR
        WHERE ROWNUM &lt;= #{top}
          AND JSONPARSE_STATUS IS NULL
          AND OUTPUT_FILEPATH IS NOT NULL
          AND OUTPUT_FILENAME IS NOT NULL
          AND ASR_STATUS = 1
        ORDER BY TO_DATE(LEAV_WORD_TIME,'YYYY-MM-DD HH24:MI:SS')
    </select>

    <select id="queryWaitingSend" resultType="com.itcc.mva.entity.IntelligentAsrEntity" parameterType="java.lang.Integer">
        SELECT
            PID
            , LOG_ID
            , LEAV_WORD_TIME
            , ANI
            , LEAVEWORD_PATH
            , VOICE_FILE_NAME
            , OUTPUT_FILEPATH
            , OUTPUT_FILENAME
            , ASR_STATUS
            , ASR_TIMESTAMP
            , ASR_FAILTIMES
            , DATAGENERATE_TIME
            , JSONPARSE_STATUS
            , JSONPARSE_RESULT
            , CALLID
            ,ISSUBMIT
            ,FULL_PATH
        FROM ICC_UNION.T_QC_INTELLIGENT_ASR
        WHERE ROWNUM &lt;= #{num}
          AND ISSUBMIT IS NULL
          AND CALLID IS NOT NULL
          AND JSONPARSE_RESULT IS NOT NULL
        ORDER BY TO_date(LEAV_WORD_TIME,'YYYY-MM-DD HH24:MI:SS')
    </select>


</mapper>