<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.itcc.mva.mapper.IntelligentAsrMapper">

    <insert id="generateBaseTable" >
       insert into t_Qc_Intelligent_Asr
          (pid, LOG_ID, LEAV_WORD_TIME, ANI, LEAVEWORD_PATH, VOICE_FILE_NAME)
          select sys_guid(),
         LOG_ID,
         LEAV_WORD_TIME,
         ANI,
         LEAVEWORD_PATH,
         VOICE_FILE_NAME
        from IVR_JT_LEAVWORD@HUAWEI_ICD_DB_LINK
	</insert>

    <select id="getRecordsToAsr" resultType="string">
        select *
        from T_QC_INTELLIGENT_ASR t
        where t.output_filepath is null
        and t.output_filename is null
        and t.asr_status = 0
        and t.asr_timestamp is null
        and t.asr_failtimes &lt; 4
        and ROWNUM &lt; 25
    </select>

    <update id="asrSuccess">
        select *
        from T_QC_INTELLIGENT_ASR t
        where t.output_filepath is null
        and t.output_filename is null
        and t.asr_status = 0
        and t.asr_timestamp is null
        and t.asr_failtimes &lt; 4
        and ROWNUM &lt; 25
    </update>

    <update id="asrFail">
        select *
        from T_QC_INTELLIGENT_ASR t
        where t.output_filepath is null
        and t.output_filename is null
        and t.asr_status = 0
        and t.asr_timestamp is null
        and t.asr_failtimes &lt; 4
        and ROWNUM &lt; 25
    </update>
</mapper>